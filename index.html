<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accidentalidad</title>
    <!-- Incluir Leaflet CSS y JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <style>
        #map {
            height: 100vh;
            width: 100%;
        }

        @keyframes fadein{
            from {opacity: 0;}
            to {opacity: 1}
        }
        .leaflet-circleMarker-icon {
            -webkit-animation: fadein 2s ease-in alternate infinite;
            -moz-animation: fadein 2s ease-in alternate infinite;
            animation: fadein 2s ease-in alternate infinite;
        }
 
    </style>
</head>
<body>
    <div id="map">
    <script>
        // Inicializar el mapa
        var map = L.map('map', {
            center: [2.44497084266567, -76.61667097602667],
            zoom: 13
        });
        
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Coordenadas
        var latlngs = [
            [2.431056159178395, -76.60428344267588], //CALLE 17 B/ SANTA MONICA
            [2.4574954072453767, -76.64341213194183], //CALLE 5 # 52-65 B / LOMAS DE GRANADA
            [2.4505852417714267, -76.62813745030164], //CALLE 5 CARRERA 33
            [2.4530959597524116, -76.63272883966333], //CALLE 5 CARRERA 38A 
            [2.4441309919463006, -76.61346803971851], //CALLE 5 CON 15          //1
            [2.4479586477401942, -76.62162825892041], //CALLE 5 CON 25
            [2.4441309919463006, -76.61346803971851], //CALLE 5 CON CARRERA  15 //2
            [2.489446888290217, -76.58179529261552], // CARRERA 17 CALLE 56N -04 B/ GRAN BRETAÑA
            [2.4429152774349507, -76.61521563891742], //CARRERA 17 CALLE 7
            [2.452162145622968, -76.59751877913476], //CARRERA 18 NORTE  CON CALLE 6 LA ESTANCIA
            [2.4519931645764337, -76.58482265941059], // CARRERA 1E # 26N-305
            [2.4410887506758674, -76.60220957916846], // CARRERA 2 CON CALLE 4
            [2.441183964461526, -76.62129835824508], //CARRERA 21  CALLE 11 BARRIO RETIRO BAJO
            [2.435583203501701, -76.60517465392141], // CARRERA 3 CON CALLE 10A CENTRO
            [2.456901996582941, -76.63370493643708], //CARRERA 42 CON CALLE 2B
            [2.459281465646252, -76.58633121038278], //CARRERA 6 # 28-24 B GALICIA 
            [2.438760293960854, -76.60694738441934], //CARRERA 6 CON CALLE 8 
            [2.44275910109451, -76.60745184906322], //CARRERA 8 CALLE 4 CENTRO
            [2.4664308202558973, -76.58710612783175], //CARRERA 9 CALLE 36N (excel) =>   //CARRERA 9 CALLE 35N (gm)    
            [2.481286169526027, -76.56914398863834], //CARRERA 9 CALLE 66N     
            [2.4797150074611527, -76.57551806793236],// CARRERA 9 CON 57 NORTE
            [2.453280598487957, -76.6017830817371], // CARRERA 9 CON CALLE 13 NORTE STA CLARA
            [2.4664308202558973, -76.58710612783175], //CARRERA 9 CON CALLE 35 NORTE   //2
            [2.442135053407933, -76.60865931349441], //CARRERA 9 CON CALLE 5 CENTRO
            [2.452399258754861, -76.60388379394217], //TRANSVERSAL 9 NORTE CON CARRERA 9
            //Friday
            [2.4552854359899086, -76.64056464954993], //CALLE 5 CON CARRERA 52
            [2.450088375958807, -76.62547708247584], //CALLE 5 FRENTE NOMENCLATURA 30-22
            [2.476038636518041, -76.55880344533648], //CALLE 71CN  # 4E-04
            [2.461845716517259, -76.58321778401819], //CARRERA 6 FRENTE NOMENCLATURA 13N-55
            [2.4547646677329733, -76.59899848427132],//CARRERA 9  17N-12
            [2.4812476266920345, -76.56808770410048], //CARRERA 9  FRENTE NOMENCLATURA 67N-132
            [2.4816711896491888, -76.5649200220991],//CARRERA 9 # 69N-14
            [2.4585950438347903, -76.59381219665971],//CARRERA 9 # 6N-27
            [2.4805586168476306, -76.57484219146761], //CARRERA 9 60N-199
            [2.4614668968857547, -76.59130422060493],// CARRERA 9 CON 38 NORTE
            [2.4917663683635825, -76.55913356507985],//CARRERA 9 CON CALLE 82 NORTE
            [2.481268794553435, -76.56976688445717],//CARRERA 9N FRENTE NOMENCLATURA # 65N-40
            [2.4374023737401695, -76.61633658728482],//CRA 17 ANILLO VIAL SUR
            [2.4283703533198238, -76.62123847284765],//DIAGONAL A LA NOMENCLATURA 28 TRANSVERSAL 1-147 B/ TUNEL BAJO
            [2.427806242823661, -76.62139995626548],//TRANSVERSAL 17 CON 18 FRENTE ESTACION DE SERVICIO LOS FAROLES     
            [2.4501106170991354, -76.63707245037287],//VEREDA DE TORRES
        //Variantes
            [2.4329398237362403, -76.62081734765023], //KILOMETRO 0 +600 VARIANTE SUR
            [2.429122049575538, -76.62106326732163], //KILOMETRO 0 VIA POPAYAN TIMBIO
            [2.4367147657109927, -76.62432973510535], //KILOMETRO 1 + 500MTS VARIANTE POPAYAN
            [2.4337193044580876, -76.62112991854552], //KILOMETRO 1 VARIANTE SUR
            [2.4338296401841473, -76.62117133179999], //KILOMETRO 1 VARIANTE SUR
            [2.4872499667533075, -76.58634246410149], //KILOMETRO 10 + 200 VARIANTE POPAYAN
            [2.496622671075358, -76.5720461898529], //KILOMETRO 11 + 100 VARIANTE NORTE
            [2.497139053473363, -76.57033688189708], //KILOMETRO 12 + 600 MTRS VARIANTE NORTE
            [2.495230470707542, -76.56372794582579],//KILOMETRO 13 + 630 VARIANTE POPAYAN
            [2.494852192703368, -76.562247819502691], //KILOMETRO 13+ 400 MTS VARIANTE NORTE PUNTA LARGA
            [2.494462913968692, -76.56077860203493], //KILOMETRO 14 + 100 VARIANTE POPAYAN
            [2.494688612138992, -76.56201388892381], //kilometro 14+400 variante norte
            [2.44395812554432, -76.6327875051005], //KILOMETRO 2 +715 VARIANTE SUR 
            [2.4482502047385277, -76.63483683696859], //KILOMETRO 3 +300 VARIANTE SUR
            [2.456315833048016, -76.63950623704758], //KILOMETRO 4 + 280 VARIANTE POPAYAN
            [2.4591700837365242, -76.63946252034175], //KILOMETRO 4+200 CON CRA 48A
            [2.4595382673687416, -76.63907925636958], //KILOMETRO 4+300 MTS VARIANTE POPAYAN 
            [2.466857737006898, -76.62893750149391], //KILOMETRO 5 + 800 MTS VARIANTE POPAYAN
            [2.4771719654668596, -76.61517647200952], //KILOMETRO 6 + 900 VARIANTE NORTE
            [2.4790569671658464, -76.60877682724778], //KILOMETRO 8 + 132 MTSVARIANTE NORTE
            [2.479978783190739, -76.60748936690592], //KILOMETRO 8 + 700 VARIANTE POPAYAN PARCELACION SAN FRANCISCO
            [2.4799359080410293, -76.60753228225065], //KILOMETRO 8 +400 MTS VARIANTE NORTE
            [2.4813091003159378, -76.58789520572668], //KILOMETRO 9 + 400VARIANTE NORTE 
            [2.4822730853369577, -76.58775366447522], //KILOMETRO 9 VARIANTE POPAYAN
            [2.458216888258537, -76.63949384376711], //VARIANTE KILOMETRO 4 + 900 METROS
            [2.4798083926407757, -76.60209989431777], //variante kilometro 9+720 metros
            [2.49197858980923, -76.58187555446041], //VARIANTE NORTE KM 11 + 200
            [2.4381630250366793, -76.62771825105801], //Variante Popayan Kilometro 2 + 200
            [2.479364912000089, -76.59981472981141], //VARIANTE POPAYAN KILOMETRO 9 + 500MTS
            [2.4381980672540378, -76.6277924907696], //variante sur kilometro 1 +720 
            [2.4663767195834057, -76.62978181021406], //VARIANTE SUR POPAYAN KILOMETRO 5
        ];
        var coordenadasVistas = [];
        var markers = [];
        const url1 ="https://www.google.com/maps/@2.4664673,-76.5870022,3a,75y,23.84h,68.8t/data=!3m7!1e1!3m5!1st0jdjtgD6zscoHjvjd3nvA!2e0!6shttps:%2F%2Fstreetviewpixels-pa.googleapis.com%2Fv1%2Fthumbnail%3Fpanoid%3Dt0jdjtgD6zscoHjvjd3nvA%26cb_client%3Dmaps_sv.share%26w%3D900%26h%3D600%26yaw%3D23.836932552015625%26pitch%3D21.196323625312218%26thumbfov%3D90!7i13312!8i6656?authuser=0&coh=205410&entry=ttu";
        const url2 = "https://www.google.com/maps/@2.4441862,-76.6134566,3a,75y,309.13h,55.86t/data=!3m7!1e1!3m5!1sW5JnwPGdjeHHdJWXBG2o5g!2e0!6shttps:%2F%2Fstreetviewpixels-pa.googleapis.com%2Fv1%2Fthumbnail%3Fpanoid%3DW5JnwPGdjeHHdJWXBG2o5g%26cb_client%3Dmaps_sv.share%26w%3D900%26h%3D600%26yaw%3D309.13433814521903%26pitch%3D34.14123733722256%26thumbfov%3D90!7i13312!8i6656?authuser=0&coh=205410&entry=ttu"
        const norte = `<a href=${url1}>Norte</a>` 
        const centro = `<a href=${url2}>Centro</a>` 

        L.circleMarker([2.4381980672540378, -76.6277924907696], {
                className: "leaflet-circleMarker-icon",
                radius: 60,
                color: 'red',
                fillColor: '#f03',
            }).addTo(map).bindPopup(`Positivo para cámara  ${centro}  ${norte}`)
                .openPopup();

                L.circleMarker([2.4329398237362403, -76.62081734765023], {
                className: "leaflet-circleMarker-icon",
                radius: 60,
                color: 'red',
                fillColor: '#f03',
            }).addTo(map).bindPopup(`Positivo para cámara  ${centro}  ${norte}`)
                .openPopup();

                
                L.circleMarker([2.4591700837365242, -76.63946252034175], {
                className: "leaflet-circleMarker-icon",
                radius: 60,
                color: 'red',
                fillColor: '#f03',
            }).addTo(map).bindPopup(`Positivo para cámara  ${centro}  ${norte}`)
                .openPopup();

                L.circleMarker([2.479978783190739, -76.60748936690592], {
                className: "leaflet-circleMarker-icon",
                radius: 60,
                color: 'red',
                fillColor: '#f03',
            }).addTo(map).bindPopup(`Positivo para cámara  ${centro}  ${norte}`)
                .openPopup();
        // Crear los marcadores
        for (var i = 0; i < latlngs.length; i++) {
            var latlng = latlngs[i];
            var marker;
            
            if (coordenadasVistas.some(coord => coord[0] === latlng[0] && coord[1] === latlng[1])) {
                // Si las coordenadas se repiten, cambia al icono de circulo
               // Crear el marcador
                L.circleMarker(latlng, {
                className: "leaflet-circleMarker-icon",
                radius: 60,
                color: 'red',
                fillColor: '#f03',
            }).addTo(map).bindPopup(`Positivo para cámara  ${centro}  ${norte}`)
                .openPopup();

            } else {
                // Si las coordenadas son únicas, usa el puntero azul
                marker = L.marker(latlng).addTo(map);
            }
            
            markers.push(marker);
            coordenadasVistas.push(latlng);
        }

        // Crea una línea que conecte los puntos
    
        map.fitBounds(L.latLngBounds(latlngs));
        
    </script>
    </div>
</body>
</html>
